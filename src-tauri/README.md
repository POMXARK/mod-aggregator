# Backend (Rust + Tauri)

Backend часть приложения на Rust с использованием Tauri 2.0.

## Структура

### main.rs
Главный файл с Tauri командами:
- `get_sites()` - Получить список сайтов
- `add_site()` - Добавить сайт
- `update_site()` - Обновить сайт
- `delete_site()` - Удалить сайт
- `get_mods()` - Получить список модов
- `check_updates()` - Проверить обновления модов
- `fetch_page()` - Загрузить HTML страницу
- `fetch_resource()` - Загрузить ресурс (CSS, изображение)
- `save_page_local()` - Сохранить страницу локально с привязкой к сайту
- `save_resource()` - Сохранить ресурс в папку
- `get_cached_page()` - Получить страницу из кеша
- `get_saved_page_for_site()` - Получить сохраненную страницу для сайта
- `get_saved_page_versions()` - Получить все версии сохраненной страницы
- `delete_saved_page_version()` - Удалить конкретную версию страницы
- `list_cached_pages()` - Список всех кешированных страниц
- `clear_page_cache()` - Очистить кеш страниц

### database.rs
Работа с SQLite базой данных:
- Инициализация таблиц (sites, mods, notifications, saved_pages)
- CRUD операции для сайтов
- CRUD операции для модов
- Работа с уведомлениями
- Версионирование сохраненных страниц

**Таблицы:**
- `sites` - Сайты для парсинга
- `mods` - Моды
- `notifications` - Уведомления о новых версиях
- `saved_pages` - Сохраненные версии страниц с привязкой к сайтам

### parser.rs
Движок парсинга HTML:
- Парсинг страниц по конфигурации
- Извлечение данных модов
- Обработка селекторов

### parser_builder.rs
Построитель парсеров из селекторов.

### models.rs
Модели данных:
- `Site` - Сайт
- `Mod` - Мод
- `ModUpdate` - Обновление мода
- `Notification` - Уведомление
- `ParserNode` - Нода парсера
- `ParserConfig` - Конфигурация парсера

### notification.rs
Сервис уведомлений:
- Создание уведомлений о новых версиях
- Отправка уведомлений

## Версионирование страниц

Сохраненные страницы привязываются к сайтам и версионируются:
- Каждая версия имеет timestamp
- Можно получить последнюю версию или все версии
- Можно удалить конкретную версию
- При сохранении создается новая версия с текущей датой/временем

## Комментарии

Все комментарии и документация пишутся на русском языке.



