# Инструкция по логированию

## Запуск с подробными логами

### Вариант 1: PowerShell скрипт (рекомендуется)
```powershell
.\run-dev.ps1
```

### Вариант 2: Через npm с переменной окружения
```powershell
$env:RUST_LOG = "debug"
npm run tauri:dev
```

### Вариант 3: Обычный запуск
```powershell
npm run tauri:dev
```

## Где смотреть логи

### 1. Логи Rust (бэкенд)
- Выводятся в консоль PowerShell/терминал, где запущен `npm run tauri:dev`
- Уровни: `error`, `warn`, `info`, `debug`
- Префиксы: `[fetch_page]`, `[save_page_local]`, и т.д.

### 2. Логи веб-части (фронтенд)
- Откройте DevTools в Tauri приложении (F12 или через меню)
- Перейдите на вкладку "Console"
- Ищите логи с префиксами:
  - `[PageViewer]` - логи компонента просмотра страниц
  - `[ParserBuilder]` - логи конструктора парсера
  - `[IFRAME]` - логи из скрипта внутри iframe

## Уровни логирования Rust

Установите переменную окружения `RUST_LOG`:

- `RUST_LOG=error` - только ошибки
- `RUST_LOG=warn` - предупреждения и ошибки
- `RUST_LOG=info` - информационные сообщения (по умолчанию)
- `RUST_LOG=debug` - все логи, включая отладочные
- `RUST_LOG=trace` - максимальная детализация

Пример:
```powershell
$env:RUST_LOG = "debug"
npm run tauri:dev
```

## Что логируется

### Rust (бэкенд):
- Инициализация приложения
- Запросы к базе данных
- HTTP запросы (`fetch_page`)
- Сохранение файлов (`save_page_local`)
- Ошибки и предупреждения

### JavaScript/Svelte (фронтенд):
- Загрузка страниц
- Создание Blob URL
- Загрузка iframe
- Сообщения между окнами (postMessage)
- Режим выделения элементов
- Выбор элементов

## Отладка проблем

1. **Приложение перезапускается:**
   - Проверьте логи Rust на наличие panic
   - Проверьте размер загружаемой страницы (должен быть < 10MB)

2. **Страница не загружается:**
   - Проверьте логи `[PageViewer]` в консоли браузера
   - Проверьте логи `fetch_page` в консоли Rust

3. **Выделение не работает:**
   - Проверьте логи `[IFRAME]` в консоли браузера
   - Убедитесь, что скрипт загрузился (`parser-script-ready`)
   - Проверьте сообщения `postMessage`

4. **Нода не создается:**
   - Проверьте логи `[ParserBuilder]` в консоли браузера
   - Проверьте, что `onElementSelect` вызывается








