# Анализ конфликтов скриптов с функционалом выделения

## Потенциально конфликтующие скрипты с сайта synthira.ru

### 1. Рекламные скрипты
- **adfinity.js** - рекламный скрипт, может перехватывать события мыши
- **360_light.js** (luxcdn.com) - рекламный скрипт, активно работает с DOM и событиями

**Проблемы:**
- Перехватывают события `mousemove`, `click`, `mouseover`
- Могут изменять DOM структуру, что влияет на позиционирование рамки выделения
- Могут добавлять обработчики событий, которые конфликтуют с нашим скриптом

### 2. Библиотеки UI
- **slimselect.min.js** - библиотека для селектов
- **jqueryui.js** - jQuery UI, может перехватывать события
- **dle_js.js** - скрипты CMS

**Проблемы:**
- jQuery UI может перехватывать события мыши для drag & drop
- Могут добавлять обработчики на `document` или `window`

### 3. Аналитика
- **Google Analytics** (gtag.js, analytics.js)
- **Yandex Metrika** (metrika/tag.js)

**Проблемы:**
- Отслеживают клики и движения мыши
- Могут добавлять обработчики событий на элементы

### 4. Внутренние скрипты сайта
- **libz.js**, **libsz.js** - внутренние библиотеки
- **engine/classes/min/index.php** - минифицированные скрипты CMS

**Проблемы:**
- Могут содержать обработчики событий, специфичные для сайта
- Могут изменять DOM после загрузки страницы

### 5. Chrome расширения
- **chrome-extension://gppongmhjkpfnbhagpmjfkannfbllamg/** - расширение браузера

**Проблемы:**
- Расширения могут добавлять обработчики событий на страницу
- Могут перехватывать события мыши

## Решение

Все перечисленные скрипты **удаляются** из HTML перед встраиванием нашего скрипта выделения:

1. **Удаление всех `<script>` тегов** - встроенных и внешних
2. **Удаление inline обработчиков событий** - `onclick`, `onmouseover`, `onmousemove` и т.д.
3. **Удаление data-атрибутов с JavaScript** - `data-onclick`, `data-javascript` и т.д.
4. **Удаление `<noscript>` тегов** - могут содержать альтернативный контент

## Проверка

После удаления скриптов в HTML остаются только:
- Наш скрипт выделения (`parser-selection-script`)
- Встроенные CSS стили
- Встроенные изображения (base64)

Все конфликтующие скрипты должны быть удалены, и функционал выделения должен работать корректно.







